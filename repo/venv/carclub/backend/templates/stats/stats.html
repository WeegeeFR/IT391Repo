{% block content %}

<h1>Statistics</h1>

<!-- First form will scrape the website for past events and links to generate options for dropdown -->
{% if not show_dropdown%}
<form method="post">
    {% csrf_token %}
    <button type="submit" name="get_events">Get Past Events</button>
</form>
{% endif %}

{% if show_dropdown %}
    <!-- Dropdown with checkbox's to get a record from a event-->
    <form method="post">
        {% csrf_token %}
        <label for="dropdown">Choose a event to get records from:</label>
        <select id="dropdown" name="dropdown">
            {% for label, value in options_dict.items %}
                <option value="{{ value }}">{{ label }}</option>
            {% endfor %}
        </select>
        <br><br>
        <!-- raw and pax settings for now, need to add final-->
        <label for="raw">
            <input type="radio" name=setting id="raw" value="Raw" checked> Raw
        </label>
        <label for="pax">
            <input type="radio" name=setting id="pax" value="Pax"> Pax
        </label><br>

        <label for="field1">Search by Name</label>
        <input type="text" id="name" name="name" value="{{ name }}" placeholder="Name">
        <br><br>
        
        <label for="field2">Search by Car Make:</label>
        <input type="text" id="car_make" name="car_make" value="{{ car_make }}" placeholder="Car Make">
        <br><br>
        
        <!-- Second Button: Call function with the selected value -->
        <button type="submit" name="selected_event">Get Stats</button>
    </form>

    <!--Listing the records-->
{% endif %}

{% endblock %}